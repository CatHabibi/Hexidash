<!doctype html>
<html lang="en" dir="ltr">

<head>

    <!-- META DATA -->
    <meta charset="UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="keywords"
        content="admin,admin dashboard,admin panel,admin template,bootstrap,clean,dashboard,flat,jquery,modern,responsive,premium admin templates,responsive admin,ui,ui kit.">

    <!-- FAVICON -->
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/brand/favicon.ico" />

    <!-- TITLE -->
    <title>Servers - Hexidash</title>

    <!-- BOOTSTRAP CSS -->
    <link id="style" href="../assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <!-- STYLE CSS -->
    <link href="../assets/css/style.css" rel="stylesheet" />
    <link href="../assets/css/dark-style.css" rel="stylesheet" />
    <link href="../assets/css/transparent-style.css" rel="stylesheet">
    <link href="../assets/css/skin-modes.css" rel="stylesheet" />

    <!--- FONT-ICONS CSS -->
    <link href="../assets/css/icons.css" rel="stylesheet" />

    <!-- COLOR SKIN CSS -->
    <link id="theme" rel="stylesheet" type="text/css" media="all" href="../assets/colors/color1.css" />

</head>

<body class="app sidebar-mini ltr dark-mode">

    <!-- GLOBAL-LOADER -->
    <div id="global-loader">
        <img src="../assets/images/loader.svg" class="loader-img" alt="Loader">
    </div>
    <!-- /GLOBAL-LOADER -->

    <!-- PAGE -->
    <div class="page">

        <%- include('./hexidashcomp/header') %>
            <%- include('./hexidashcomp/sidebar') %>

                <!--app-content open-->
                <div class="main-content app-content mt-0">
                    <div class="side-app">

                        <!-- CONTAINER -->
                        <div class="main-container container-fluid">

                            <!-- PAGE-HEADER -->
                            <div class="page-header">
                                <h1 class="page-title">Servers</h1>
                            </div>
                            <!-- PAGE-HEADER END -->
                            <% if (variables) { %>
                                <% if (variables.error && status_replies.error[variables.error]) { %>
                                    <div class="alert alert-danger" role="alert">
                                        <button type="button" class="btn-close" data-bs-dismiss="alert"
                                            aria-hidden="true">×</button>
                                        <i class="fa fa-frown-o me-2" aria-hidden="true"></i>
                                        <%- eval(`\`${status_replies.error[variables.error]}\``) %>
                                    </div>
                                    <% } else if (variables.success && status_replies.success[variables.success]) { %>
                                        <div class="alert alert-success" role="alert">
                                            <button type="button" class="btn-close" data-bs-dismiss="alert"
                                                aria-hidden="true">×</button>
                                            <i class="fa fa-check-circle-o me-2" aria-hidden="true"></i>
                                            <%- eval(`\`${status_replies.success[variables.success]}\``) %>
                                        </div>
                                        <% } else { %>
                                            <div class="alert alert-info" role="alert">
                                                <button type="button" class="btn-close" data-bs-dismiss="alert"
                                                    aria-hidden="true">×</button>
                                                <i class="fa fa-bell-o me-2" aria-hidden="true"></i>
                                                <%= JSON.stringify(variables) %>
                                            </div>
                                            <% } %>
                                                <% } %>
                                                    <!-- ROW-1 -->
                                                    <div class="row">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12">
                                                            <div class="row">
                                                                <div class="col-lg-6 col-md-12 col-sm-12 col-xl-3">
                                                                    <div class="card overflow-hidden">
                                                                        <div class="card-body">
                                                                            <div class="d-flex">
                                                                                <div class="mt-2">
                                                                                    <h6 class="">CPU</h6>
                                                                                    <h2 class="mb-0 number-font">
                                                                                        <%= current.cpu %>% / <%=
                                                                                                total.cpu %>%
                                                                                    </h2>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-md-12 col-sm-12 col-xl-3">
                                                                    <div class="card overflow-hidden">
                                                                        <div class="card-body">
                                                                            <div class="d-flex">
                                                                                <div class="mt-2">
                                                                                    <h6 class="">MEMORY</h6>
                                                                                    <h2 class="mb-0 number-font">
                                                                                        <%= current.memory %>MB / <%=
                                                                                                total.memory %>MB
                                                                                    </h2>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-md-12 col-sm-12 col-xl-3">
                                                                    <div class="card overflow-hidden">
                                                                        <div class="card-body">
                                                                            <div class="d-flex">
                                                                                <div class="mt-2">
                                                                                    <h6 class="">SERVERS</h6>
                                                                                    <h2 class="mb-0 number-font">
                                                                                        <%= current.servers %> server<%=
                                                                                                current.servers==1 ? ""
                                                                                                : "s" %>
                                                                                                / <%= total.servers %>
                                                                                                    server<%=
                                                                                                        total.servers==1
                                                                                                        ? "" : "s" %>
                                                                                    </h2>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 col-md-12 col-sm-12 col-xl-3">
                                                                    <div class="card overflow-hidden">
                                                                        <div class="card-body">
                                                                            <div class="d-flex">
                                                                                <div class="mt-2">
                                                                                    <h6 class="">DISK</h6>
                                                                                    <h2 class="mb-0 number-font">
                                                                                        <%= current.disk %>MB / <%=
                                                                                                total.disk %>MB
                                                                                    </h2>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="card" data-aos="fade-up" data-aos-delay="900">
                                                                <div class="pb-4 border-0 card-header">
                                                                    <div class="card-body">

                                                                        <section class="bd-example table-responsive">
                                                                            <% if (current.servers==0) { %>
                                                                                You have no servers.
                                                                                <% } else { %>
                                                                                    <table
                                                                                        class="table table table-bordered">
                                                                                        <thead>
                                                                                            <tr
                                                                                                class="text-md font-semibold tracking-wide text-left text-gray-900 bg-gray-100 uppercase border-b border-gray-600">
                                                                                                <th scope="col">
                                                                                                    Server Name
                                                                                                </th>
                                                                                                <th scope="col">
                                                                                                    Memory</th>
                                                                                                <th scope="col">
                                                                                                    Disk</th>
                                                                                                <th scope="col">
                                                                                                    CPU</th>
                                                                                                <th scope="col">
                                                                                                    Renew Time
                                                                                                </th>
                                                                                                <th scope="col">
                                                                                                    Renew
                                                                                                    Actions</th>
                                                                                                <th scope="col">
                                                                                                    Server
                                                                                                    Actions</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody>
                                                                                            <% let
                                                                                                currentDate=Date.now()
                                                                                                %>
                                                                                                <% for (let server of
                                                                                                    data.panelinfo.relationships.servers.data)
                                                                                                    { %>
                                                                                                    <tr>
                                                                                                        <td
                                                                                                            class="px-4 py-3 text-ms font-semibold border">
                                                                                                            <%=
                                                                                                                server.attributes.name.length>
                                                                                                                15
                                                                                                                ?
                                                                                                                server.attributes.name.slice(0,
                                                                                                                12)
                                                                                                                +
                                                                                                                "..."
                                                                                                                :
                                                                                                                server.attributes.name
                                                                                                                %>
                                                                                                        </td>
                                                                                                        <td
                                                                                                            class="px-4 py-3 text-ms font-semibold border">
                                                                                                            <%= server.attributes.limits.memory
                                                                                                                %>
                                                                                                                MB
                                                                                                        </td>
                                                                                                        <td
                                                                                                            class="px-4 py-3 text-ms font-semibold border">
                                                                                                            <%= server.attributes.limits.disk
                                                                                                                %>
                                                                                                                MB
                                                                                                        </td>
                                                                                                        <td
                                                                                                            class="px-4 py-3 text-ms font-semibold border">
                                                                                                            <%= server.attributes.limits.cpu
                                                                                                                %>
                                                                                                                %
                                                                                                        </td>
                                                                                                        <td
                                                                                                            class="px-4 py-3 text-ms font-semibold border">
                                                                                                            <% if
                                                                                                                (Object.entries(settings.eggs).filter(egg=>
                                                                                                                server.attributes.egg
                                                                                                                ==
                                                                                                                egg[1].info.egg).length
                                                                                                                ==
                                                                                                                1)
                                                                                                                {
                                                                                                                %>
                                                                                                                <% if
                                                                                                                    (server_timers[server.attributes.id]
                                                                                                                    &&
                                                                                                                    server_timers[server.attributes.id].action
                                                                                                                    !=="???"
                                                                                                                    ) {
                                                                                                                    %>
                                                                                                                    <%
                                                                                                                        let
                                                                                                                        s=server_timers[server.attributes.id].timer
                                                                                                                        -
                                                                                                                        currentDate;
                                                                                                                        if
                                                                                                                        (s
                                                                                                                        <
                                                                                                                        0)
                                                                                                                        s=0;
                                                                                                                        let
                                                                                                                        ms=s
                                                                                                                        %
                                                                                                                        1000;
                                                                                                                        s=(s
                                                                                                                        -
                                                                                                                        ms)
                                                                                                                        /
                                                                                                                        1000;
                                                                                                                        let
                                                                                                                        secs=s
                                                                                                                        %
                                                                                                                        60;
                                                                                                                        s=(s
                                                                                                                        -
                                                                                                                        secs)
                                                                                                                        /
                                                                                                                        60;
                                                                                                                        let
                                                                                                                        mins=s
                                                                                                                        %
                                                                                                                        60;
                                                                                                                        let
                                                                                                                        hrs=(s
                                                                                                                        -
                                                                                                                        mins)
                                                                                                                        /
                                                                                                                        60;
                                                                                                                        let
                                                                                                                        output=hrs
                                                                                                                        + ' hours'
                                                                                                                        ;
                                                                                                                        %>

                                                                                                                        <% if
                                                                                                                            (server_timers[server.attributes.id].action=="auto"
                                                                                                                            )
                                                                                                                            {
                                                                                                                            %>
                                                                                                                            Automatically
                                                                                                                            renewing
                                                                                                                            in:
                                                                                                                            <%= output
                                                                                                                                %>
                                                                                                                                <% } else
                                                                                                                                    if
                                                                                                                                    (server_timers[server.attributes.id].action=="suspend"
                                                                                                                                    )
                                                                                                                                    {
                                                                                                                                    %>
                                                                                                                                    <%= output
                                                                                                                                        %>
                                                                                                                                        <% } else
                                                                                                                                            if
                                                                                                                                            (server_timers[server.attributes.id].action=="deletion"
                                                                                                                                            )
                                                                                                                                            {
                                                                                                                                            %>
                                                                                                                                            Server
                                                                                                                                            deletion
                                                                                                                                            in:
                                                                                                                                            <%= output
                                                                                                                                                %>
                                                                                                                                                <% }
                                                                                                                                                    %>
                                                                                                                                                    <% } else
                                                                                                                                                        {
                                                                                                                                                        %>
                                                                                                                                                        None.
                                                                                                                                                        <% }
                                                                                                                                                            %>
                                                                                                                                                            <% }
                                                                                                                                                                %>
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <% let
                                                                                                                renewcost;
                                                                                                                let
                                                                                                                renewcoststring;
                                                                                                                renewcoststring=settings.renewal.renew_fee
                                                                                                                + " coin"
                                                                                                                +
                                                                                                                (settings.renewal.renew_fee==1
                                                                                                                ? ""
                                                                                                                : "s" );
                                                                                                                %>

                                                                                                                <% if
                                                                                                                    (server_timers[server.attributes.id]
                                                                                                                    &&
                                                                                                                    server_timers[server.attributes.id].action
                                                                                                                    !=="???"
                                                                                                                    ) {
                                                                                                                    %>


                                                                                                                    <br>
                                                                                                                    <form
                                                                                                                        action="/servers/renew/<%= server.attributes.id %>"
                                                                                                                        method="POST">
                                                                                                                        <input
                                                                                                                            class="btn btn-primary"
                                                                                                                            type="submit"
                                                                                                                            id="one"
                                                                                                                            style="display: none"
                                                                                                                            value="Renew">
                                                                                                                    </form>

                                                                                                                    <a href="#"
                                                                                                                        class="btn btn-primary"
                                                                                                                        onclick="document.getElementById('one').click()">
                                                                                                                        Renew
                                                                                                                    </a>
                                                                                                                    <% if
                                                                                                                        (server_timers[server.attributes.id].action
                                                                                                                        !=="deletion"
                                                                                                                        )
                                                                                                                        {
                                                                                                                        %>
                                                                                                                        <br><br>
                                                                                                                        <a class="btn btn-primary"
                                                                                                                            href="#"
                                                                                                                            onclick="document.getElementById('two').click()">
                                                                                                                            <%= server_timers[server.attributes.id].action=="auto"
                                                                                                                                ? "Disable"
                                                                                                                                : "Enable"
                                                                                                                                %>
                                                                                                                                Automatic
                                                                                                                                Renewal
                                                                                                                        </a>
                                                                                                                        <% }
                                                                                                                            %>
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <br>
                                                                                                            <br>
                                                                                                            <br>
                                                                                                            <button
                                                                                                                class="btn btn-primary btn-rounded"
                                                                                                                disabled>Renew</button>

                                                                                                            <% if
                                                                                                                (server_timers[server.attributes.id].action
                                                                                                                !=="deletion"
                                                                                                                ) { %>
                                                                                                                <form
                                                                                                                    action="/servers/auto_renew/<%= server.attributes.id %>"
                                                                                                                    method="POST">
                                                                                                                    <% let
                                                                                                                        toggle_type=server_timers[server.attributes.id].action=="auto"
                                                                                                                        ? "Disable"
                                                                                                                        : "Enable"
                                                                                                                        %>
                                                                                                                        <input
                                                                                                                            type="submit"
                                                                                                                            style="display: none"
                                                                                                                            id="two"
                                                                                                                            value="<%= toggle_type %> automatic renewals.">
                                                                                                                </form>
                                                                                                                <% } %>
                                                                                                                    <% } else
                                                                                                                        {
                                                                                                                        %>
                                                                                                                        <button
                                                                                                                            class="btn btn-primary btn-rounded"
                                                                                                                            disabled>Renew</button>

                                                                                                                        <% }
                                                                                                                            %>

                                                                                                                            <% if
                                                                                                                                (Object.entries(settings.eggs).filter(egg=>
                                                                                                                                server.attributes.egg
                                                                                                                                ==
                                                                                                                                egg[1].info.egg).length
                                                                                                                                ==
                                                                                                                                1)
                                                                                                                                {
                                                                                                                                %>
                                                                                                                                <form
                                                                                                                                    action="/servers/renew/<%= server.attributes.id %>"
                                                                                                                                    method="POST">
                                                                                                                                    <input
                                                                                                                                        type="submit"
                                                                                                                                        style="display: none;"
                                                                                                                                        value="Renew">
                                                                                                                                </form>
                                                                                                                                <% }
                                                                                                                                    %>





                                                                                                        </td>
                                                                                                        <td>
                                                                                                            <a class="btn btn-primary justify-content-center"
                                                                                                                href="/servers/modify?id=<%= server.attributes.id %>">Modify
                                                                                                            </a>
                                                                                                            <br>
                                                                                                            <br>
                                                                                                            <a id="deleteServer"
                                                                                                                class="btn btn-primary justify-content-center"
                                                                                                                onclick="deleteServer('<%= server.attributes.id %>')">Delete</a>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <% } %>
                                                                                        </tbody>
                                                                                    </table>
                                                                                    <% } %>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                        </div>
                        <!-- ROW-2 END -->

                    </div>
                    <!-- CONTAINER END -->
                </div>
    </div>
    <!--app-content close-->

    </div>


    <%- include('./hexidashcomp/footer') %>

        </div>

        <!-- BACK-TO-TOP -->
        <a href="#top" id="back-to-top"><i class="fa fa-angle-up"></i></a>

        <!-- JQUERY JS -->
        <script src="../assets/js/jquery.min.js"></script>

        <!-- BOOTSTRAP JS -->
        <script src="../assets/plugins/bootstrap/js/popper.min.js"></script>
        <script src="../assets/plugins/bootstrap/js/bootstrap.min.js"></script>

        <!-- SPARKLINE JS-->
        <script src="../assets/js/jquery.sparkline.min.js"></script>

        <!-- Sticky js -->
        <script src="../assets/js/sticky.js"></script>

        <!-- CHART-CIRCLE JS-->
        <script src="../assets/js/circle-progress.min.js"></script>

        <!-- PIETY CHART JS-->
        <script src="../assets/plugins/peitychart/jquery.peity.min.js"></script>
        <script src="../assets/plugins/peitychart/peitychart.init.js"></script>

        <!-- SIDEBAR JS -->
        <script src="../assets/plugins/sidebar/sidebar.js"></script>

        <!-- Perfect SCROLLBAR JS-->
        <script src="../assets/plugins/p-scroll/perfect-scrollbar.js"></script>
        <script src="../assets/plugins/p-scroll/pscroll.js"></script>
        <script src="../assets/plugins/p-scroll/pscroll-1.js"></script>

        <!-- INTERNAL CHARTJS CHART JS-->
        <script src="../assets/plugins/chart/Chart.bundle.js"></script>
        <script src="../assets/plugins/chart/rounded-barchart.js"></script>
        <script src="../assets/plugins/chart/utils.js"></script>

        <!-- INTERNAL SELECT2 JS -->
        <script src="../assets/plugins/select2/select2.full.min.js"></script>

        <!-- INTERNAL Data tables js-->
        <script src="../assets/plugins/datatable/js/jquery.dataTables.min.js"></script>
        <script src="../assets/plugins/datatable/js/dataTables.bootstrap5.js"></script>
        <script src="../assets/plugins/datatable/dataTables.responsive.min.js"></script>

        <!-- INTERNAL APEXCHART JS -->
        <script src="../assets/js/apexcharts.js"></script>
        <script src="../assets/plugins/apexchart/irregular-data-series.js"></script>

        <!-- C3 CHART JS -->
        <script src="../assets/plugins/charts-c3/d3.v5.min.js"></script>
        <script src="../assets/plugins/charts-c3/c3-chart.js"></script>

        <!-- CHART-DONUT JS -->
        <script src="../assets/js/charts.js"></script>

        <!-- INTERNAL Flot JS -->
        <script src="../assets/plugins/flot/jquery.flot.js"></script>
        <script src="../assets/plugins/flot/jquery.flot.fillbetween.js"></script>
        <script src="../assets/plugins/flot/chart.flot.sampledata.js"></script>
        <script src="../assets/plugins/flot/dashboard.sampledata.js"></script>

        <!-- INTERNAL Vector js -->
        <script src="../assets/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js"></script>
        <script src="../assets/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>

        <!-- SIDE-MENU JS-->
        <script src="../assets/plugins/sidemenu/sidemenu.js"></script>

        <!-- INTERNAL INDEX JS -->
        <script src="../assets/js/index1.js"></script>

        <!-- Color Theme js -->
        <script src="../assets/js/themeColors.js"></script>

        <!-- CUSTOM JS -->
        <script src="../assets/js/custom.js"></script>

</body>

</html>
